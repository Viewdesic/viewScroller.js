/* 
 * =================================================
 * viewScroller
 * Version: 2.1.1
 * Copyright (c) 2016 Marcin Gierczak
 * http://www.viewdesic.com
 * =================================================
 */
!function(a){a.fn.viewScroller=function(b){function J(){function c(c){return void 0===b[c]&&(b[c]=a(c)),b[c]}var b={};return{get:c}}"object"==typeof b&&(b=a.extend({animSpeedMainView:700,animSpeedSubView:700,animEffectMainView:"easeInOutCubic",animEffectSubView:"easeInOutCubic",animEffectMainViewCss3:"ease",animEffectSubViewCss3:"ease",useKeyboard:!0,useScrollbar:!1,changeWhenAnim:!0,loopMainViews:!1,loopSubViews:!1,fitToView:!0,timeToFit:1e3,fixedWidth:0,spaceMainBag:0,beforeChange:null,afterChange:null,beforeResize:null,afterResize:null,viewsHeight:[]},b)),a.fn.viewScroller.setAnimSpeedMainView=function(a){b.animSpeedMainView=parseInt(a,10)||700},a.fn.viewScroller.setAnimSpeedSubView=function(a){b.animSpeedSubView=parseInt(a,10)||700},a.fn.viewScroller.setAnimEffectMainView=function(a){b.animEffectMainView=a},a.fn.viewScroller.setAnimEffectSubView=function(a){b.animEffectSubView=a},a.fn.viewScroller.setAnimEffectMainViewCss3=function(a){b.animEffectMainViewCss3=a},a.fn.viewScroller.setAnimEffectSubViewCss3=function(a){b.animEffectSubViewCss3=a},a.fn.viewScroller.setUseKeyboard=function(a){a!==!0&&a!==!1||(b.useKeyboard=a)},a.fn.viewScroller.setUseScrollbar=function(a){sa(u[0],u[0].viewsData.views[0],!1,!1),a!==!0&&a!==!1||(b.useScrollbar=a),aa(),Na(!1,!1,!1)},a.fn.viewScroller.setChangeWhenAnim=function(a){a!==!0&&a!==!1||(b.changeWhenAnim=a)},a.fn.viewScroller.setLoopMainViews=function(a){a!==!0&&a!==!1||(b.loopMainViews=a)},a.fn.viewScroller.setLoopSubViews=function(a){a!==!0&&a!==!1||(b.loopSubViews=a)},a.fn.viewScroller.setFitToView=function(a){a!==!0&&a!==!1||(b.fitToView=a)},a.fn.viewScroller.setTimeToFit=function(a){b.timeToFit=parseInt(a,10)||1e3},a.fn.viewScroller.setFixedWidth=function(a){b.fixedWidth=parseInt(a,10)||0,ma(),ga(),Na(!1,!0,!1)},a.fn.viewScroller.setSpaceMainBag=function(a){b.spaceMainBag=parseInt(a,10)||0,ga(),Na(!1,!0,!1)},a.fn.viewScroller.showMainView=function(a){pa("next"===a?q.NEXT:q.PREV)},a.fn.viewScroller.showSubView=function(a,b){"next"===b?oa(a,q.NEXT):oa(a,q.PREV)},a.fn.viewScroller.showView=function(a){V(a,!1)},a.fn.viewScroller.getCurrentBagNbr=function(){return U()};var c=".mainbag",d=".subbag",e=".mainview",f=".subview",g=".vs-anchor",h=".vs-active",j=".vs-subview-prev",k=".vs-subview-next",l=".vs-mainview-prev",m=".vs-mainview-next",n=c+">"+e,o=d+">"+f,p={MAINBAG:0,SUBBAG:1},q={NEXT:1,PREV:-1},r=0,s=[],t=0,u=[],v=!1,w="",x=!1,y=a(window),z=a(document),A=y.height(),B=y.width(),C=!1,D=!1,E=Date.now(),F=10,G=50,H=!0,I=!0,K=new J,L=function(){var a=document.createElement("p").style,b="transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a;return b},M=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=this.length,d=b||0,e=c;d<e;d++)if(this[d]===a)return d;return-1})},N=function(){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1})},O=function(){return"undefined"!=typeof window.orientation},P=function(){var a=y.height(),b=y.width();return Math.abs(A-a)>100?(A=a,!0):Math.abs(B-b)>100&&(B=b,!0)},Q=function(a,b){var c="#"+b.attr("vs-anchor");return"#undefined"===c&&(c=""),a+c},R=function(){var b=[];return K.get(n).each(function(c){b.push(Q(c,a(this)))}),b},S=function(b){var c=[],d=K.get(n).slice(b,b+1);d.find(K.get(o)).each(function(b){c.push(Q(b,a(this)))});for(var e=0,f=c.length;e<f;)e++;return c},T=function(a){for(var b=0,c=u.length;b<c;b++)for(var d=0,e=u[b].viewsData.views.length;d<e;d++)if(u[b].viewsData.views[d].split("#")[1]===a)return b;return-1},U=function(){if(window.location.hash.indexOf("#")>-1){urlViewName=window.location.hash.replace("#","");var b=[],c="div[vs-anchor="+urlViewName+"], section[vs-anchor="+urlViewName+"], article[vs-anchor="+urlViewName+"]";return K.get(c).find(K.get(o)).each(function(c){b.push(a(this).attr("vs-anchor"))}),b.length>0?T(b[0]):0===b.length&&(K.get(c).parents(K.get(d)).each(function(c){b.push(a(this).attr("class"))}),b.length>0&&b[0].includes(d.replace(".","")))?T(urlViewName):-1}return 0},V=function(a,b){x=b===!0,window.location.hash=a},W=function(a,b,c){var d=new db;return d.setBagObj(a,b,c),d},X=function(a){for(var b=[],c="",e=0,f=0,g=a.length;e<g;)b=S(e),c=a[e].split("#")[1],b.length>0&&(u.push(W(d+"|"+f+"|"+c+"|"+e,b,p.SUBBAG)),f++),e++},Y=function(){var a=R();u.push(W(c,a,p.MAINBAG)),X(a)},Z=function(a){if(x===!1&&window.location.hash.indexOf("#")>-1){var b=window.location.hash.replace("#",""),c=$(b);"undefined"!=typeof c&&c.length>0&&sa(u[c[0]],c[1],!1,!1)}x=!1},$=function(a){for(var b=[],c=0,d=u.length;c<d;c++)for(var e=u[c].viewsData.views,f=u[c].viewsData.bagType,g=0,h=e.length;g<h;g++)if(e[g].indexOf("#")>-1&&e[g].split("#")[1]===a)return b.push(c,e[g],f),b},_=function(a,e){var f=a.viewsData.views.indexOf(a.viewsData.activeView)+e;return(b.loopSubViews&&"undefined"==typeof a.viewsData.views[f]&&a.viewsData.container.includes(d)||b.loopMainViews&&"undefined"==typeof a.viewsData.views[f]&&a.viewsData.container.includes(c))&&(f=f<0?a.viewsData.views.length-1:0),f},aa=function(){b.useScrollbar?(K.get("html").css("overflow-y","scroll"),K.get("body").css("overflow-y","")):(K.get("body").css("overflow-y","hidden"),K.get("html").css("overflow-y","hidden"))},ba=function(a,b){return b?1:a},ca=function(a){a.viewsData.viewsPos.length=0;for(var c=ia(),d=0,e=a.viewsData.views.length;d<e;d++)a.viewsData.bagType===p.SUBBAG?da(a,d):ea(a,d,c)},da=function(a,d){var e=K.get(c).width();B=y.width(),e=0===b.fixedWidth?B-b.spaceMainBag:b.fixedWidth,a.viewsData.viewsPos.push(e*d)},ea=function(a,c,d){A=y.height(),0===c?a.viewsData.viewsPos.push(0):c>0&&d&&b.viewsHeight.length>=c&&0!==b.viewsHeight[c-1]?a.viewsData.viewsPos.push(a.viewsData.viewsPos[c-1]+b.viewsHeight[c-1]):c>0&&a.viewsData.viewsPos.push(a.viewsData.viewsPos[c-1]+A)},fa=function(a){for(var b=y.scrollTop(),c=0,d=0,e=0,f=0,g=a.length;f<g;f++)d=Math.abs(a[f]-b),d<c&&(e=f),c=d;return e},ga=function(){var g=K.get(c).width(),h=y.height();g=0===b.fixedWidth?y.width()-b.spaceMainBag:b.fixedWidth,K.get(c).css("width",g+"px"),K.get(e).css("height",h+"px"),ia()&&ha(h),K.get(f).css("width",g+"px"),K.get(d).each(function(b){a(this).css("width",g*a(this).find(f).length+"px")}),I&&K.get(c).css("height","auto")},ha=function(a){Array.prototype.forEach.call(b.viewsHeight,function(b,c){var d=parseInt(b,10);0===d&&(d=a),c+=1,K.get(e+":nth-child("+c+")").css("height",d+"px")})},ia=function(){var a=!0;return Array.prototype.forEach.call(b.viewsHeight,function(b){(isNaN(b)||parseInt(b,10)<0)&&(a=!1)}),a},ja=function(){K.get(d).each(function(b){a(this).addClass(d.replace(".","")+"-"+b)})},ka=function(){K.get(d).wrap('<div style="overflow: hidden; height: 100%; width: 100%;"></div>')},la=function(){0===b.fixedWidth?K.get(c).css("width",K.get(c).width()-b.spaceMainBag+"px"):K.get(c).css("width",b.fixedWidth+"px")},ma=function(){b.fixedWidth>0&&K.get(c).css({position:"absolute"})},na=function(){K.get(c).find(K.get(h)).each(function(b){0===b&&V(a(this).attr("vs-anchor"))})},oa=function(a,c){a>-1&&(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&sa(u[a],"",!1,!1,c)},pa=function(a){(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&sa(u[0],"",!1,!1,a)},qa=function(a,c,d,e,f){if("x"===e){var g=ba(b.animSpeedMainView,d);a.css({"-webkit-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-moz-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-o-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms",transition:"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-webkit-transform":"translate3d("+c+"px,0,0)","-moz-transform":"translate3d("+c+"px,0,0)","-o-transform":"translate3d("+c+"px,0,0)",transform:"translate3d("+c+"px,0,0)"})}else{var h=ba(b.animSpeedMainView,d);a.css({"-webkit-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-moz-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-o-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms",transition:"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-webkit-transform":"translate3d(0,"+c+"px,0)","-moz-transform":"translate3d(0,"+c+"px,0)","-o-transform":"translate3d(0,"+c+"px,0)",transform:"translate3d(0,"+c+"px,0)"})}a.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){"function"==typeof f&&f()})},ra=function(a,c,d,e,f){"x"===e?a.stop().animate({scrollLeft:c},ba(b.animSpeedSubView,d),b.animEffectSubView,function(){"function"==typeof f&&f()}):a.stop().animate({scrollTop:c},ba(b.animSpeedMainView,d),b.animEffectMainView,function(){"function"==typeof f&&f()})},sa=function(a,d,e,f,g){if("undefined"!=typeof g&&(d=a.viewsData.views[_(a,g)]),a.viewsData.views.length>0&&"undefined"!=typeof d){var h=a.viewsData.views.indexOf(d),i=a.viewsData.viewsPos[h],j=a.viewsData.bagType,k=a.viewsData.container,l=0;if((D||v===!1&&("undefined"==typeof e&&f===!1||a.viewsData.activeView!==d&&e===!1))&&xa(),k===c?w=d.split("#")[1]:D||(e||w===k.split("|")[2]||(v=!0,sa(u[0],k.split("|")[3]+"#"+k.split("|")[2],!1,!1)),w=k.split("|")[2]),e||D||window.location.hash!==d.split("#")[1]&&V(d.split("#")[1],!0),j===p.SUBBAG){var m=k.split("|")[0],n=k.split("|")[1];k=K.get(m+"-"+n)}else k=K.get(k);var o=k;C=!0,j===p.SUBBAG?I?qa(o,i*-1,e,"x",function(){ua(f,a,d)}):ra(o.parent(),i,e,"x",function(){ua(f,a,d)}):(f||Ha(),(b.useScrollbar||f)&&I&&(o=ta()),b.useScrollbar||!I?(Ea(),ra(o,i,e,"y",function(){ua(f,a,d)})):(l=K.get("body").scrollTop(),i-=l,qa(o,i*-1,e,"y",function(){ua(f,a,d)})),b.useScrollbar||Ga()),D||(a.viewsData.activeView=d,v=!1)}},ta=function(){return navigator.userAgent.includes("Firefox")||navigator.userAgent.includes(".NET")||navigator.userAgent.includes("MSIE")||navigator.userAgent.includes("Windows Phone")?K.get("html"):K.get("body")},ua=function(a,c,d){ya(),(b.useScrollbar||a)&&(x=!1,Ma(),va(),wa(),La(),Da()),C=!1,D=!1},va=function(){y.height()!==A&&(Na(!1,!1,!1),A=y.height())},wa=function(){if(u[0].viewsData.viewsPos.length>1&&H&&O()&&y.height()!==Math.abs(u[0].viewsData.viewsPos[0]-u[0].viewsData.viewsPos[1])){ga();for(var a=0,b=u.length;a<b;a++)ca(u[a]),sa(u[a],u[a].viewsData.activeView,!0)}},xa=function(){var a=!1;if("function"==typeof b.beforeChange&&(a=b.beforeChange()),t++,a)return!1},ya=function(){t>0&&("function"==typeof b.afterChange&&b.afterChange(),t-=1)},za=function(){K.get(g).on("click",Aa)},Aa=function(c){c.preventDefault();var d=a(this).attr("href").replace("#",""),e=$(d);e&&e.length>0&&(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&V(d)},Ba=function(){y.on("hashchange",Z)},Ca=function(){y.off("hashchange",Z)},Da=function(){y.on("scroll",Fa)},Ea=function(){y.off("scroll",Fa)},Fa=function(a){var c=fa(u[0].viewsData.viewsPos);clearTimeout(r),Ca(),window.location.hash!=="#"+u[0].viewsData.views[c].split("#")[1]&&(V(u[0].viewsData.views[c].split("#")[1],!1),u[0].viewsData.activeView=u[0].viewsData.views[c]),r=setTimeout(function(){Ba()},10),Array.prototype.forEach.call(s,function(a){clearTimeout(a)});var d=y.scrollTop();s.length=0,s.push(setTimeout(function(){if(b.fitToView){var a=!0;Array.prototype.forEach.call(u[0].viewsData.viewsPos,function(b){b===d&&(a=!1)}),a&&(D=!0,sa(u[0],u[0].viewsData.activeView,!1,!1))}},b.timeToFit))},Ga=function(){y.on("mousewheel",Ia)},Ha=function(){y.off("mousewheel",Ia)},Ia=function(a){var b=Date.now(),c=b-E;E=b,!a.ctrlKey&&c>50&&pa(a.deltaY<0?q.NEXT:q.PREV)},Ja=function(){K.get(j).each(function(b){a(this).on("click",function(){currBagNbr=U(),currBagNbr>-1&&oa(currBagNbr,q.PREV)})}),K.get(k).each(function(b){a(this).on("click",function(){currBagNbr=U(),currBagNbr>-1&&oa(currBagNbr,q.NEXT)})}),K.get(l).each(function(b){a(this).on("click",function(){pa(q.PREV)})}),K.get(m).each(function(b){a(this).on("click",function(){pa(q.NEXT)})})},Ka=function(){var a=window;Wa(a)},La=function(){y.on("resize",Na)},Ma=function(){y.off("resize",Na)},Na=function(a,c,d){if(!O()||c||O()&&P()){"function"==typeof b.beforeResize&&"undefined"==typeof d&&b.beforeResize(),ga();for(var e=0,f=u.length;e<f;e++)ca(u[e]),sa(u[e],u[e].viewsData.activeView,!0);"function"==typeof b.afterResize&&"undefined"==typeof d&&b.afterResize()}},Oa=function(){z.on("keydown",Qa)},Qa=function(a){var c=38,d=40,e=37,f=39,g=36,h=35,i=33,j=34,k=0,l=function(a){return window.event?a.keyCode:a.which?a.which:void 0},m=l(a);if(k=U(),b.useKeyboard)switch(m){case i:case c:b.useScrollbar||pa(q.PREV);break;case j:case d:b.useScrollbar||pa(q.NEXT);break;case f:0===k&&(k=1),k>-1&&oa(k,q.NEXT);break;case e:0===k&&(k=1),k>-1&&oa(k,q.PREV);break;case g:b.useScrollbar||V(u[0].viewsData.views[0].split("#")[1]);break;case h:b.useScrollbar||V(u[0].viewsData.views[u[0].viewsData.views.length-1].split("#")[1])}},Ra="createTouch"in document,Sa=[],Ta=0,Ua=0,Va={x:null,y:null},Wa=function(a){window.PointerEvent&&a.addEventListener("pointermove",_a,!1),Ra&&(a.addEventListener("touchstart",Za,!1),a.addEventListener("touchmove",_a,!1),a.addEventListener("touchend",$a,!1))},Xa=function(a){return Ya(a),Va.x+"|"+Va.y},Ya=function(a){if(Ra){Sa=a.touches;for(var b=0,c=Sa.length;b<c;b++){var d=Sa[b];Va.x=ab(d),Va.y=bb(d)}}else Va.x=ab(a),Va.y=bb(a)},Za=function(a){var b=Xa(a).split("|");Ta=parseInt(b[0],10),Ua=parseInt(b[1],10)},$a=function(a){var c=Xa(a).split("|"),d=0,e=F,f=G,g=parseInt(c[0],10),h=parseInt(c[1],10),i=parseInt(Ta+e,10),j=parseInt(Ta-e,10),k=parseInt(Ua+f,10),l=parseInt(Ua-f,10);Math.abs(g-Ta)<Math.abs(h-Ua)?h>k?b.useScrollbar||pa(q.PREV):h<l&&(b.useScrollbar||pa(q.NEXT)):(d=U(),d>-1&&(g>i?oa(d,q.PREV):g<j&&oa(d,q.NEXT)))},_a=function(a){b.useScrollbar||(a.preventDefault?a.preventDefault():a.returnValue=!1),Ya(a)},ab=function(a){return a.clientX},bb=function(a){return a.clientY},cb=function(){M(),N(),la(),L()||(I=!1),ja(),ka(),ga(),aa(),Y();for(var a=0,c=u.length;a<c;a++)ca(u[a]);Na(!1,!1,!1),b.useScrollbar||Ga(),na(),Z(),za(),Ba(),Da(),La(),Ka(),Ja(),b.useKeyboard&&Oa(),ma()},db=function(){var a={activeView:"",container:"",bagType:p.MAINBAG,views:[],viewsPos:[]},b=function(b,c,d){a.container=b,a.views=c,a.bagType=d,a.activeView=a.views[0]};return{setBagObj:b,viewsData:a}};cb()}}(jQuery);
