/* 
 * =================================================
 * viewScroller
 * Version: 2.0.5
 * Copyright (c) 2016 Marcin Gierczak
 * http://www.viewdesic.com
 * =================================================
 */
!function(a){a.fn.viewScroller=function(b){function J(){function c(c){return void 0===b[c]&&(b[c]=a(c)),b[c]}var b={};return{get:c}}"object"==typeof b&&(b=a.extend({animSpeedMainView:700,animSpeedSubView:700,animEffectMainView:"easeInOutCubic",animEffectSubView:"easeInOutCubic",animEffectMainViewCss3:"ease",animEffectSubViewCss3:"ease",useKeyboard:!0,useScrollbar:!1,changeWhenAnim:!0,loopMainViews:!1,loopSubViews:!1,fitToView:!0,timeToFit:1e3,fixedWidth:0,spaceMainBag:0,beforeChange:null,afterChange:null,beforeResize:null,afterResize:null},b)),a.fn.viewScroller.setAnimSpeedMainView=function(a){b.animSpeedMainView=parseInt(a,10)||700},a.fn.viewScroller.setAnimSpeedSubView=function(a){b.animSpeedSubView=parseInt(a,10)||700},a.fn.viewScroller.setAnimEffectMainView=function(a){b.animEffectMainView=a},a.fn.viewScroller.setAnimEffectSubView=function(a){b.animEffectSubView=a},a.fn.viewScroller.setAnimEffectMainViewCss3=function(a){b.animEffectMainViewCss3=a},a.fn.viewScroller.setAnimEffectSubViewCss3=function(a){b.animEffectSubViewCss3=a},a.fn.viewScroller.setUseKeyboard=function(a){a!==!0&&a!==!1||(b.useKeyboard=a)},a.fn.viewScroller.setUseScrollbar=function(a){pa(u[0],u[0].viewsData.views[0],!1,!1),a!==!0&&a!==!1||(b.useScrollbar=a),ba(),Fa(!1,!1,!1)},a.fn.viewScroller.setChangeWhenAnim=function(a){a!==!0&&a!==!1||(b.changeWhenAnim=a)},a.fn.viewScroller.setLoopMainViews=function(a){a!==!0&&a!==!1||(b.loopMainViews=a)},a.fn.viewScroller.setLoopSubViews=function(a){a!==!0&&a!==!1||(b.loopSubViews=a)},a.fn.viewScroller.setFitToView=function(a){a!==!0&&a!==!1||(b.fitToView=a)},a.fn.viewScroller.setTimeToFit=function(a){b.timeToFit=parseInt(a,10)||1e3},a.fn.viewScroller.setFixedWidth=function(a){b.fixedWidth=parseInt(a,10)||0,ja(),fa(),Fa(!1,!0,!1)},a.fn.viewScroller.setSpaceMainBag=function(a){b.spaceMainBag=parseInt(a,10)||0,fa(),Fa(!1,!0,!1)},a.fn.viewScroller.showMainView=function(a){ma("next"===a?q.NEXT:q.PREV)},a.fn.viewScroller.showSubView=function(a,b){"next"===b?la(a,q.NEXT):la(a,q.PREV)},a.fn.viewScroller.showView=function(a){W(a,!1)};var c=".mainbag",d=".subbag",e=".mainview",f=".subview",g=".vs-anchor",h=".vs-active",j=".vs-subview-prev",k=".vs-subview-next",l=".vs-mainview-prev",m=".vs-mainview-next",n=c+">"+e,o=d+">"+f,p={MAINBAG:0,SUBBAG:1},q={NEXT:1,PREV:-1},r=0,s=[],t=0,u=[],v=!1,w="",x=!1,y=a(window),z=a(document),A=y.height(),B=y.width(),C=!1,D=!1,E=Date.now(),F=10,G=50,H=!0,I=!0,K=new J,L=function(){var a=document.createElement("p").style,b="transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a;return b},M=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=this.length,d=b||0,e=c;d<e;d++)if(this[d]===a)return d;return-1})},N=function(){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1})},O=function(){return"undefined"!=typeof window.orientation},P=function(){return Math.abs(A-y.height())>100?(A=y.height(),!0):Math.abs(B-y.width())>100&&(B=y.width(),!0)},Q=function(a,b){var c="#"+b.attr("vs-anchor");return"#undefined"===c&&(c=""),a+c},R=function(){var b=[];return K.get(n).each(function(c){b.push(Q(c,a(this)))}),b},S=function(b){var c=[],d=K.get(n).slice(b,b+1);d.find(K.get(o)).each(function(b){c.push(Q(b,a(this)))});for(var e=0;e<c.length;)e++;return c},T=function(a){for(var b=u.length,c=0;c<b;c++)for(var d=u[c].viewsData.views.length,e=0;e<d;e++)if(u[c].viewsData.views[e].split("#")[1]===a)return c;return-1},U=function(b){var c=[];return K.get("div[vs-anchor="+b+"]").find(K.get(o)).each(function(b){c.push(a(this).attr("vs-anchor"))}),c.length>0?T(c[0]):0===c.length&&(K.get("div[vs-anchor="+b+"]").parents(K.get(d)).each(function(b){c.push(a(this).attr("class"))}),c.length>0&&c[0].includes(d.replace(".","")))?T(b):-1},V=function(){var a="",b=0;return window.location.hash.indexOf("#")>-1&&(a=window.location.hash.replace("#",""),b=U(a)),b},W=function(a,b){x=b===!0,window.location.hash=a},X=function(a,b,c){var d=new Wa;return d.setBagObj(a,b,c),d},Y=function(a){for(var b=[],c="",e=0,f=0,g=a.length;e<g;)b=S(e),c=a[e].split("#")[1],b.length>0&&(u.push(X(d+"|"+f+"|"+c+"|"+e,b,p.SUBBAG)),f++),e++},Z=function(){var a=R();u.push(X(c,a,p.MAINBAG)),Y(a)},$=function(a){if(x===!1&&window.location.hash.indexOf("#")>-1){var b=window.location.hash.replace("#",""),c=_(b);"undefined"!=typeof c&&c.length>0&&pa(u[c[0]],c[1],!1,!1)}x=!1},_=function(a){for(var b=[],c=u.length,d=0;d<c;d++)for(var e=u[d].viewsData.views,f=u[d].viewsData.bagType,g=e.length,h=0;h<g;h++)if(e[h].indexOf("#")>-1&&e[h].split("#")[1]===a)return b.push(d,e[h],f),b},aa=function(a,e){var f=a.viewsData.views.indexOf(a.viewsData.activeView)+e;return(b.loopSubViews&&"undefined"==typeof a.viewsData.views[f]&&a.viewsData.container.includes(d)||b.loopMainViews&&"undefined"==typeof a.viewsData.views[f]&&a.viewsData.container.includes(c))&&(f=f<0?a.viewsData.views.length-1:0),f},ba=function(){b.useScrollbar?(K.get("html").css("overflow-y","scroll"),K.get("body").css("overflow-y","")):(K.get("body").css("overflow-y","hidden"),K.get("html").css("overflow-y","hidden"))},ca=function(a,b){return b?1:a},da=function(a){a.viewsData.viewsPos.length=0;for(var e=a.viewsData.views.length,f=0;f<e;f++)if(a.viewsData.bagType===p.SUBBAG){var g=K.get(c).width();g=0===b.fixedWidth?y.width()-b.spaceMainBag:b.fixedWidth,a.viewsData.viewsPos.push(g*f)}else a.viewsData.viewsPos.push(y.height()*f)},ea=function(a){for(var b=y.scrollTop(),c=0,d=0,e=0,f=a.length,g=0;g<f;g++)d=Math.abs(a[g]-b),d<c&&(e=g),c=d;return e},fa=function(){var g=K.get(c).width();g=0===b.fixedWidth?y.width()-b.spaceMainBag:b.fixedWidth,K.get(c).css("width",g+"px");var h=y.height();K.get(e).css("height",h+"px"),K.get(f).css("width",g+"px"),K.get(d).each(function(b){a(this).css("width",g*a(this).find(f).length+"px")}),I&&K.get(c).css("height","auto")},ga=function(){K.get(d).each(function(b){a(this).addClass(d.replace(".","")+"-"+b)})},ha=function(){K.get(d).wrap('<div style="overflow: hidden; height: 100%; width: 100%;"></div>')},ia=function(){0===b.fixedWidth?K.get(c).css("width",K.get(c).width()-b.spaceMainBag+"px"):K.get(c).css("width",b.fixedWidth+"px")},ja=function(){b.fixedWidth>0&&a(K.get(c)).css({position:"absolute"})},ka=function(){a(K.get(c)).find(K.get(h)).each(function(b){0===b&&W(a(this).attr("vs-anchor"))})},la=function(a,c){a>-1&&(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&pa(u[a],"",!1,!1,c)},ma=function(a){(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&pa(u[0],"",!1,!1,a)},na=function(a,c,d,e,f){if("x"===e){var g=ca(b.animSpeedMainView,!1);a.css({"-webkit-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-moz-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-o-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms",transition:"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-webkit-transform":"translate3d("+c+"px,0,0)","-moz-transform":"translate3d("+c+"px,0,0)","-o-transform":"translate3d("+c+"px,0,0)",transform:"translate3d("+c+"px,0,0)"})}else{var h=ca(b.animSpeedMainView,!1);a.css({"-webkit-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-moz-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-o-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms",transition:"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-webkit-transform":"translate3d(0,"+c+"px,0)","-moz-transform":"translate3d(0,"+c+"px,0)","-o-transform":"translate3d(0,"+c+"px,0)",transform:"translate3d(0,"+c+"px,0)"})}a.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){"function"==typeof f&&f()})},oa=function(a,c,d,e,f){"x"===e?a.stop().animate({scrollLeft:c},ca(b.animSpeedSubView,d),b.animEffectSubView,function(){"function"==typeof f&&f()}):a.stop().animate({scrollTop:c},ca(b.animSpeedMainView,d),b.animEffectMainView,function(){"function"==typeof f&&f()})},pa=function(a,d,e,f,g){if("undefined"!=typeof g&&(d=a.viewsData.views[aa(a,g)]),a.viewsData.views.length>0&&"undefined"!=typeof d){var h=a.viewsData.views.indexOf(d),i=a.viewsData.viewsPos[h],j=a.viewsData.container,k=0;if(D||v===!1&&("undefined"==typeof e&&f===!1||a.viewsData.activeView!==d&&e===!1)){var l=!1;if("function"==typeof b.beforeChange&&(l=b.beforeChange()),t++,l)return!1}if(a.viewsData.container===c?w=d.split("#")[1]:D||(e||w===a.viewsData.container.split("|")[2]||(v=!0,pa(u[0],a.viewsData.container.split("|")[3]+"#"+a.viewsData.container.split("|")[2],!1,!1)),w=a.viewsData.container.split("|")[2]),e||D||window.location.hash!==d.split("#"[1])&&W(d.split("#")[1],!0),a.viewsData.bagType===p.SUBBAG){var m=j.split("|")[0],n=j.split("|")[1];j=K.get(m+"-"+n)}else j=K.get(j);var o=j;C=!0,a.viewsData.bagType===p.SUBBAG?I?na(o,i*-1,e,"x",function(){qa(f,a,d)}):oa(o.parent(),i,e,"x",function(){qa(f,a,d)}):(f||za(),(b.useScrollbar||f)&&I&&(o=navigator.userAgent.includes("Firefox")||navigator.userAgent.includes(".NET")||navigator.userAgent.includes("MSIE")||navigator.userAgent.includes("Windows Phone")?K.get("html"):K.get("body")),b.useScrollbar||!I?(wa(),oa(o,i,e,"y",function(){qa(f,a,d)})):(k=K.get("body").scrollTop(),i-=k,na(o,i*-1,e,"y",function(){qa(f,a,d)})),b.useScrollbar||ya()),D||(a.viewsData.activeView=d,v=!1)}},qa=function(a,c,d){if(t>0&&("function"==typeof b.afterChange&&b.afterChange(),t-=1),b.useScrollbar||a){if(x=!1,Ea(),y.height()!==A&&(Fa(!1,!1,!1),A=y.height()),u[0].viewsData.viewsPos.length>1&&H&&O()&&y.height()!==Math.abs(u[0].viewsData.viewsPos[0]-u[0].viewsData.viewsPos[1])){fa();for(var e=u.length,f=0;f<e;f++)da(u[f]),pa(u[f],u[f].viewsData.activeView,!0)}Da(),va()}else;C=!1,D=!1},ra=function(){K.get(g).on("click",sa)},sa=function(c){c.preventDefault();var d=a(this).attr("href").replace("#",""),e=_(d);e&&e.length>0&&(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&W(d)},ta=function(){y.on("hashchange",$)},ua=function(){y.off("hashchange",$)},va=function(){y.on("scroll",xa)},wa=function(){y.off("scroll",xa)},xa=function(a){var c=ea(u[0].viewsData.viewsPos);clearTimeout(r),ua(),window.location.hash!=="#"+u[0].viewsData.views[c].split("#")[1]&&(W(u[0].viewsData.views[c].split("#")[1],!1),u[0].viewsData.activeView=u[0].viewsData.views[c]),r=setTimeout(function(){ta()},10),Array.prototype.forEach.call(s,function(a){clearTimeout(a)}),s.length=0;var e=(u[0].viewsData.viewsPos.length-1,y.scrollTop());s.push(setTimeout(function(){if(b.fitToView){var a=!0;Array.prototype.forEach.call(u[0].viewsData.viewsPos,function(b){b===e&&(a=!1)}),a&&(D=!0,pa(u[0],u[0].viewsData.activeView,!1,!1))}},b.timeToFit))},ya=function(){y.on("mousewheel",Aa)},za=function(){y.off("mousewheel",Aa)},Aa=function(a){var b=Date.now(),c=b-E;E=b,!a.ctrlKey&&c>50&&ma(a.deltaY<0?q.NEXT:q.PREV)},Ba=function(){K.get(j).each(function(b){a(this).on("click",function(){currentBagIndex=V(),currentBagIndex>-1&&la(currentBagIndex,q.PREV)})}),K.get(k).each(function(b){a(this).on("click",function(){currentBagIndex=V(),currentBagIndex>-1&&la(currentBagIndex,q.NEXT)})}),K.get(l).each(function(b){a(this).on("click",function(){ma(q.PREV)})}),K.get(m).each(function(b){a(this).on("click",function(){ma(q.NEXT)})})},Ca=function(){var a=window;Oa(a)},Da=function(){y.on("resize",Fa)},Ea=function(){y.off("resize",Fa)},Fa=function(a,c,d){if(!O()||c||O()&&P()){"function"==typeof b.beforeResize&&"undefined"==typeof d&&b.beforeResize(),fa();for(var e=u.length,f=0;f<e;f++)da(u[f]),pa(u[f],u[f].viewsData.activeView,!0);"function"==typeof b.afterResize&&"undefined"==typeof d&&b.afterResize()}},Ga=function(){z.on("keydown",Ia)},Ia=function(a){var c=38,d=40,e=37,f=39,g=36,h=35,i=33,j=34,k=0,l=function(a){return window.event?a.keyCode:a.which?a.which:void 0},m=l(a);if(k=V(),b.useKeyboard)switch(m){case i:case c:b.useScrollbar||ma(q.PREV);break;case j:case d:b.useScrollbar||ma(q.NEXT);break;case f:k>-1&&la(k,q.NEXT);break;case e:k>-1&&la(k,q.PREV);break;case g:b.useScrollbar||W(u[0].viewsData.views[0].split("#")[1]);break;case h:b.useScrollbar||W(u[0].viewsData.views[u[0].viewsData.views.length-1].split("#")[1])}},Ja="createTouch"in document,Ka=[],La=0,Ma=0,Na={x:null,y:null},Oa=function(a){window.PointerEvent&&a.addEventListener("pointermove",Sa,!1),Ja&&(a.addEventListener("touchstart",Qa,!1),a.addEventListener("touchmove",Sa,!1),a.addEventListener("touchend",Ra,!1))},Pa=function(a){if(Ka=a.touches,Ja){Ka=a.touches;for(var b=Ka.length,c=0;c<b;c++){var d=Ka[c];Na.x=Ta(d),Na.y=Ua(d)}}else Na.x=Ta(a),Na.y=Ua(a);return Na.x+"|"+Na.y},Qa=function(a){var b=Pa(a).split("|");La=parseInt(b[0],10),Ma=parseInt(b[1],10)},Ra=function(a){var c=Pa(a).split("|"),d=0,e=F,f=G,g=parseInt(c[0],10),h=parseInt(c[1],10),i=parseInt(La+e,10),j=parseInt(La-e,10),k=parseInt(Ma+f,10),l=parseInt(Ma-f,10);Math.abs(g-La)<Math.abs(h-Ma)?h>k?b.useScrollbar||ma(q.PREV):h<l&&(b.useScrollbar||ma(q.NEXT)):(d=V(),d>-1&&(g>i?la(d,q.PREV):g<j&&la(d,q.NEXT)))},Sa=function(a){if(b.useScrollbar||(a.preventDefault?a.preventDefault():a.returnValue=!1),Ja){Ka=a.touches;for(var c=Ka.length,d=0;d<c;d++){var e=Ka[d];Na.x=Ta(e),Na.y=Ua(e)}}else Na.x=Ta(a),Na.y=Ua(a)},Ta=function(a){var b=a.clientX;return b},Ua=function(a){var b=a.clientY;return b},Va=function(){M(),N(),ia(),L()||(I=!1),ga(),ha(),fa(),ba(),Z();for(var a=u.length,c=0;c<a;c++)da(u[c]);Fa(!1,!1,!1),b.useScrollbar||ya(),ka(),$(),ra(),ta(),va(),Da(),Ca(),Ba(),b.useKeyboard&&Ga(),ja()},Wa=function(){var a={activeView:"",container:"",bagType:p.MAINBAG,views:[],viewsPos:[]},b=function(b,c,d){a.container=b,a.views=c,a.bagType=d,a.activeView=a.views[0]};return{setBagObj:b,viewsData:a}};Va()}}(jQuery);
